<Window
    x:Class="AntiDupl.NET.WPF.View.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behavior="clr-namespace:AntiDupl.NET.WPF.Behavior"
    xmlns:control="clr-namespace:AntiDupl.NET.WPF.Control"
    xmlns:convertor="clr-namespace:AntiDupl.NET.WPF.Convertor"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:helper="clr-namespace:AntiDupl.NET.WPF.Helper"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:objectModel="clr-namespace:AntiDupl.NET.WPF.ObjectModel"
    xmlns:viewModel="clr-namespace:AntiDupl.NET.WPF.ViewModel"
    Title="{Binding Title, Mode=OneWay}"
    Width="625"
    Height="350"
    d:DataContext="{d:DesignInstance viewModel:MainViewModel,
                                     IsDesignTimeCreatable=False}"
    UseLayoutRounding="True"
    mc:Ignorable="d">
    <Window.Resources>
        <convertor:DuplResultMultiValueConverter x:Key="duplResultMultiValueConverter" />
        <convertor:FileSizeConverter x:Key="fileSizeConverter" />
        <convertor:FolderAreDiffrentMultuValueConverter x:Key="folderAreDiffrentMultuValueConverter" />
        <convertor:ViewModeToVisibilityConverter x:Key="viewModeToVisibilityConverter" />
        <convertor:ListToBackgroundMultiValueConverter x:Key="listToBackgroundMultiValueConverter" />
        <BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter" />
        <convertor:DeleteBackgroundValueConverter x:Key="deleteBackgroundValueConverter" />
        <convertor:DifferenceValueConverter x:Key="differenceValueConverter" />

        <Style TargetType="{x:Type Image}">
            <Setter Property="RenderOptions.BitmapScalingMode" Value="HighQuality" />
            <Setter Property="Stretch" Value="Fill" />
            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.2" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <Menu.Resources>
                <Style BasedOn="{StaticResource {x:Type Image}}" TargetType="{x:Type Image}">
                    <Setter Property="Height" Value="16" />
                    <Setter Property="Width" Value="16" />
                </Style>
            </Menu.Resources>
            <MenuItem Header="{DynamicResource mainwindow_menu_file}">
                <MenuItem Command="{Binding LoadResultsCommand}" Header="{DynamicResource mainwindow_menu_file_open_search_profile}">
                    <MenuItem.Icon>
                        <Image Source="../Image/img/ProfileOpenMenu.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Command="{Binding SaveResultsCommand}" Header="{DynamicResource mainwindow_menu_file_save_search_profile_as}">
                    <MenuItem.Icon>
                        <Image Source="../Image/img/ProfileSaveAsMenu.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem
                    Header="{DynamicResource mainwindow_menu_file_load_on_open}"
                    IsCheckable="True"
                    IsChecked="{Binding Configuration.LoadResultOnOpen}" />
                <MenuItem
                    Header="{DynamicResource mainwindow_menu_file_save_on_close}"
                    IsCheckable="True"
                    IsChecked="{Binding Configuration.SaveResultOnClose}" />
                <Separator />
                <MenuItem Command="{Binding CloseCmd}" Header="{DynamicResource mainwindow_menu_file_exit}" />
            </MenuItem>

            <MenuItem Header="{DynamicResource mainwindow_menu_edit}">
                <MenuItem Command="{Binding UndoCommand}" Header="{DynamicResource mainwindow_menu_edit_undo}">
                    <MenuItem.Icon>
                        <Image Source="../Image/img/UndoMenu.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Command="{Binding UndoAllCommand}" Header="{DynamicResource mainwindow_menu_edit_undo_all}">
                    <MenuItem.Icon>
                        <Image Source="../Image/img/UndoMenu.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Command="{Binding RedoCommand}" Header="{DynamicResource mainwindow_menu_edit_redo}">
                    <MenuItem.Icon>
                        <Image Source="../Image/img/RedoMenu.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Header="{DynamicResource mainwindow_menu_edit_select_all}" />
            </MenuItem>

            <MenuItem Header="{DynamicResource mainwindow_menu_view}">
                <MenuItem Header="{DynamicResource mainwindow_menu_view_language}" ItemsSource="{Binding Path=LanguageCollection}">
                    <MenuItem.ItemContainerStyle>
                        <Style TargetType="MenuItem">
                            <Setter Property="Header" Value="{Binding Title}" />
                            <Setter Property="IsCheckable" Value="True" />

                            <Setter Property="IsChecked" Value="{Binding Path=(viewModel:LanguageViewModel.IsChecked), Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            <Setter Property="Command" Value="{Binding DataContext.LanguageSelectedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type MenuItem}}}" />
                            <Setter Property="CommandParameter" Value="{Binding Path=(viewModel:LanguageViewModel.Enum)}" />
                        </Style>
                    </MenuItem.ItemContainerStyle>
                </MenuItem>
                <MenuItem Header="{DynamicResource mainwindow_menu_view_mode}">
                    <MenuItem
                        x:Name="toGroup"
                        Command="{Binding ConvertToGroupCommand}"
                        Header="{DynamicResource mainwindow_menu_view_toGroup}"
                        IsCheckable="true" />
                    <MenuItem
                        x:Name="toDuplPair"
                        Command="{Binding ConvertToDuplPairCommand}"
                        Header="{DynamicResource mainwindow_menu_view_toDuplPair}"
                        IsCheckable="true" />
                    <Separator />

                    <i:Interaction.Behaviors>
                        <behavior:MenuItemButtonGroupBehavior />
                    </i:Interaction.Behaviors>
                </MenuItem>
            </MenuItem>
        </Menu>

        <ToolBar DockPanel.Dock="Top">
            <ToolBar.Resources>
                <Style BasedOn="{StaticResource {x:Type Image}}" TargetType="{x:Type Image}">
                    <Setter Property="Height" Value="32" />
                    <Setter Property="Width" Value="32" />
                </Style>
            </ToolBar.Resources>
            <Button Command="{Binding UndoCommand}" ToolTip="{Binding UndoTooltip, Mode=OneWay}">
                <Image Source="../Image/undo-3-32.png" />
            </Button>
            <Menu Height="26" HorizontalContentAlignment="Center">
                <MenuItem Header="Menu">
                    <MenuItem Command="{Binding UndoAllCommand}" Header="Undo all" />
                </MenuItem>
            </Menu>
            <Button Command="{Binding RedoCommand}">
                <Image Source="../Image/redo-3-32.png" />
            </Button>
            <Separator />
            <Button Command="{Binding OpenConfigurationCommand}" ToolTip="Configuration">
                <Image Source="../Image/img/OptionsButton.png" />
            </Button>
            <Menu>
                <MenuItem Header="Tuning">
                    <MenuItem Command="{Binding SetPrioritiesCommand}" Header="{DynamicResource toolBar_setSaati}" />
                    <MenuItem Command="{Binding CalculateHistogramPeaksCommand}" Header="Calculate histogram peaks for DCT coefficient" />
                </MenuItem>
            </Menu>

            <Separator />
            <Button Command="{Binding OpenPathCommand}" ToolTip="Path">
                <Image Source="../Image/img/PathsButton.png" />
            </Button>
            <Button Command="{Binding SearchCommand}" ToolTip="Search">
                <Image Source="../Image/img/StartButton.png" />
            </Button>
            <Button Command="{Binding ConfigurableActionCommand}" Content="Configurable action" />

            <Button Command="{Binding RefreshCommand}" ToolTip="Refresh">
                <Image Source="../Image/img/RefreshButton.png" />
            </Button>
        </ToolBar>

        <StatusBar DockPanel.Dock="Bottom">
            <StatusBar.ItemsPanel>
                <ItemsPanelTemplate>
                    <DockPanel LastChildFill="False" />
                </ItemsPanelTemplate>
            </StatusBar.ItemsPanel>

            <StatusBarItem DockPanel.Dock="Left">
                <TextBlock Text="{Binding TotalInfo, Mode=OneWay}" />
            </StatusBarItem>
            <Separator DockPanel.Dock="Left" />
            <StatusBarItem DockPanel.Dock="Left">
                <TextBlock Text="{Binding CacheStatus, Mode=OneWay}" />
            </StatusBarItem>
            <StatusBarItem DockPanel.Dock="Right">
                <TextBlock Text="{Binding Version, Mode=OneWay}" />
            </StatusBarItem>
        </StatusBar>

        <FrameworkElement x:Name="dummyElement" Visibility="Collapsed" />

        <TabControl SelectedIndex="{Binding SelectedTabPageIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

            <TabItem Header="{DynamicResource mainwindow_tabControl_duplPair}" Visibility="{Binding ViewModeModel.ViewMode, Converter={StaticResource viewModeToVisibilityConverter}, ConverterParameter={x:Static objectModel:ViewMode.Pair}}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <control:SearchControl
                        Grid.Row="0"
                        Margin="2"
                        ClearCommand="{Binding ClearFilterResultCommand}"
                        SearchCommand="{Binding FilterResultCommand}" />

                    <DataGrid
                        Grid.Row="1"
                        helper:DataGridColumnChooserHelper.IsEnabled="True"
                        AutoGenerateColumns="False"
                        CanUserAddRows="False"
                        IsSynchronizedWithCurrentItem="True"
                        ItemsSource="{Binding Result}">
                        <!--  SelectedIndex="{Binding SelectedResultIndex}"  -->
                        <i:Interaction.Behaviors>
                            <behavior:DataGridContextMenuItemSourceBindingOnOpenBehavior MenuGeneratorDuplPair="{Binding MenuGeneratorDuplPair}" MenuGeneratorMultiDuplPair="{Binding MenuGeneratorMultiDuplPair}" />
                            <!--<CollectionContainer
                                Collection="{Binding Source={StaticResource GreekGodsData}}" />-->
                            <behavior:DataGridScrollIntoViewBehavior />
                        </i:Interaction.Behaviors>

                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <ContextMenu.ItemContainerStyle>
                                    <Style TargetType="{x:Type MenuItem}">
                                        <Setter Property="Command" Value="{Binding Command}" />
                                        <Setter Property="Header" Value="{Binding Path=Name}" />
                                        <Setter Property="ItemsSource" Value="{Binding Path=Children}" />
                                    </Style>
                                </ContextMenu.ItemContainerStyle>

                                <!--<MenuItem Header="Show diffrence in percent"
                                 Command="{Binding DataContext.ShowDiffrenceInPercent, Source={x:Reference dummyElement}}"
                                    CommandParameter="{Binding Result/}" />-->
                            </ContextMenu>
                        </DataGrid.ContextMenu>

                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="{DynamicResource mainwindow_tabControl_duplPair_ignore}">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button
                                            Command="{Binding DataContext.ExecuteIgnorePairCommand, Source={x:Reference dummyElement}}"
                                            CommandParameter="{Binding}"
                                            ToolTip="{DynamicResource mainwindow_tabControl_duplPair_ignore}">
                                            <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/MistakeButton.png" />
                                        </Button>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Width="{Binding ThumbnailColumnWidth}" Header="{DynamicResource mainwindow_GridColumn_Image}">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Image
                                                Grid.Column="0"
                                                Width="{Binding DataContext.ThumbnailWidth, Source={x:Reference dummyElement}}"
                                                Height="{Binding DataContext.ThumbnailWidth, Source={x:Reference dummyElement}}"
                                                Source="{Binding FirstFile.Image}"
                                                Stretch="Uniform"
                                                ToolTip="{Binding FirstFile.Path}">
                                                <!--  RenderOptions.BitmapScalingMode="HighQuality"  -->
                                                <Image.InputBindings>
                                                    <MouseBinding
                                                        Command="{Binding DataContext.OpenImageCommand, Source={x:Reference dummyElement}}"
                                                        CommandParameter="{Binding FirstFile.Path}"
                                                        MouseAction="LeftDoubleClick" />
                                                </Image.InputBindings>
                                                <i:Interaction.Behaviors>
                                                    <behavior:ImagePropertyBehavior />
                                                </i:Interaction.Behaviors>
                                            </Image>
                                            <Image
                                                Grid.Column="1"
                                                Width="{Binding DataContext.ThumbnailWidth, Source={x:Reference dummyElement}}"
                                                Height="{Binding DataContext.ThumbnailWidth, Source={x:Reference dummyElement}}"
                                                Source="{Binding SecondFile.Image}"
                                                Stretch="Uniform"
                                                ToolTip="{Binding SecondFile.Path}">
                                                <Image.InputBindings>
                                                    <MouseBinding
                                                        Command="{Binding DataContext.OpenImageCommand, Source={x:Reference dummyElement}}"
                                                        CommandParameter="{Binding SecondFile.Path}"
                                                        MouseAction="LeftDoubleClick" />
                                                </Image.InputBindings>
                                            </Image>
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="Difference">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Background="{Binding Difference, Converter={StaticResource differenceValueConverter}}"
                                            Text="{Binding Difference, Mode=OneWay, StringFormat={}{0:F3}}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTextColumn
                                Binding="{Binding Transform, Mode=OneWay}"
                                ElementStyle="{StaticResource VerticalAlignmentCenter}"
                                Header="Transform"
                                IsReadOnly="True" />

                            <DataGridTemplateColumn Header="{DynamicResource mainwindow_GridColumn_ImageInfo}" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <!--  Directory  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  FileName  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  FileSize  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  Resolution  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  Blockiness  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  Bluring  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  JpegPeaks  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  UtilityIndex  -->
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.Directory, Mode=OneWay}">
                                                <TextBox.Style>
                                                    <Style TargetType="{x:Type TextBox}">
                                                        <Setter Property="Grid.RowSpan" Value="1" />
                                                        <Setter Property="VerticalAlignment" Value="Bottom" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding FolderAreDiffrent}" Value="False">
                                                                <Setter Property="Grid.RowSpan" Value="2" />
                                                                <Setter Property="VerticalAlignment" Value="Center" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBox.Style>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.Directory, Mode=OneWay}"
                                                Visibility="{Binding FolderAreDiffrent, Converter={StaticResource booleanToVisibilityConverter}}" />

                                            <!--<TextBox Grid.Row="0" Grid.Column="3"
                                    Text="{Binding FirstFile.FileName, Mode=OneWay}"
                                    IsReadOnly="True"
                                    VerticalAlignment="Bottom" />

                                <TextBox Grid.Row="1" Grid.Column="3"
                                    Text="{Binding SecondFile.FileName, Mode=OneWay}"
                                    IsReadOnly="True"
                                    VerticalAlignment="Top" />-->

                                            <control:RenameImageTextBox
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                VerticalAlignment="Bottom"
                                                EnableEdit="True"
                                                ImageInfo="{Binding FirstFile}"
                                                ShowFullPath="False" />

                                            <control:RenameImageTextBox
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                VerticalAlignment="Top"
                                                EnableEdit="True"
                                                ImageInfo="{Binding SecondFile}"
                                                ShowFullPath="False" />

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.FileSize, Mode=OneWay, Converter={StaticResource fileSizeConverter}}"
                                                ToolTip="{DynamicResource mainwindow_tooltip_FileSize}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.FileSize}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="2"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.FileSize, Mode=OneWay, Converter={StaticResource fileSizeConverter}}"
                                                ToolTip="{DynamicResource mainwindow_tooltip_FileSize}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.FileSize}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="3"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.Resolution, Mode=OneWay}"
                                                ToolTip="{DynamicResource mainwindow_tooltip_Resolution}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Resolution}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="3"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.Resolution, Mode=OneWay}"
                                                ToolTip="{DynamicResource mainwindow_tooltip_Resolution}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Resolution}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="4"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.Blockiness, Mode=OneWay, StringFormat=G3}">
                                                <TextBox.ToolTip>
                                                    <ToolTip>
                                                        <TextBlock>
                                                            <Run Text="{DynamicResource mainwindow_tooltip_Blockiness}" />
                                                            <Run Text=":" />
                                                            <Run Text="{Binding FirstFile.Blockiness, Mode=OneWay}" />
                                                        </TextBlock>
                                                    </ToolTip>
                                                </TextBox.ToolTip>
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Blockiness}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="4"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.Blockiness, Mode=OneWay, StringFormat=G3}">
                                                <TextBox.ToolTip>
                                                    <ToolTip>
                                                        <TextBlock>
                                                            <Run Text="{DynamicResource mainwindow_tooltip_Blockiness}" />
                                                            <Run Text=":" />
                                                            <Run Text="{Binding SecondFile.Blockiness, Mode=OneWay}" />
                                                        </TextBlock>
                                                    </ToolTip>
                                                </TextBox.ToolTip>
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Blockiness}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="5"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.Bluring, Mode=OneWay, StringFormat=G3}">
                                                <TextBox.ToolTip>
                                                    <TextBlock>
                                                        <Run Text="{DynamicResource mainwindow_tooltip_Bluring}" />
                                                        <Run Text=":" />
                                                        <Run Text="{Binding FirstFile.Bluring, Mode=OneWay}" />
                                                    </TextBlock>
                                                </TextBox.ToolTip>
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Bluring}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="5"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.Bluring, Mode=OneWay, StringFormat=G2}">
                                                <TextBox.ToolTip>
                                                    <ToolTip>
                                                        <TextBlock>
                                                            <Run Text="{DynamicResource mainwindow_tooltip_Bluring}" />
                                                            <Run Text=":" />
                                                            <Run Text="{Binding SecondFile.Bluring, Mode=OneWay}" />
                                                        </TextBlock>
                                                    </ToolTip>
                                                </TextBox.ToolTip>
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Bluring}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="6"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.JpegPeaks, Mode=OneWay}"
                                                ToolTip="JpegPeaks">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.JpegPeaks}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="6"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.JpegPeaks, Mode=OneWay}"
                                                ToolTip="JpegPeaks">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.JpegPeaks}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="7"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.UtilityIndex, Mode=OneWay, StringFormat=G3}"
                                                ToolTip="{Binding FirstFile.UtilityIndexCalculateDecription, Mode=OneWay}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.UtilityIndex}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding Path="FirstFile.UtilityIndex" />
                                                        <!--  для обновления биндинга  -->
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="7"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.UtilityIndex, Mode=OneWay, StringFormat=G3}"
                                                ToolTip="{Binding SecondFile.UtilityIndexCalculateDecription, Mode=OneWay}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.UtilityIndex}">
                                                        <Binding Mode="OneWay" UpdateSourceTrigger="PropertyChanged" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding Path="SecondFile.UtilityIndex" />
                                                        <!--  для обновления биндинга  -->
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="{DynamicResource mainwindow_tabControl_DuplGroups}" Visibility="{Binding ViewModeModel.ViewMode, Converter={StaticResource viewModeToVisibilityConverter}, ConverterParameter={x:Static objectModel:ViewMode.Group}}">
                <DataGrid
                    AutoGenerateColumns="False"
                    IsSynchronizedWithCurrentItem="True"
                    ItemsSource="{Binding GroupsCollection}"
                    Style="{StaticResource DataGridAlternation}">
                    <i:Interaction.Behaviors>
                        <behavior:DataGridContextMenuItemSourceBindingOnOpenBehavior MenuGeneratorDuplGroup="{Binding MenuGeneratorDuplGroup}" MenuGeneratorMultiDuplGroup="{Binding MenuGeneratorMultiDuplGroup}" />
                    </i:Interaction.Behaviors>
                    <DataGrid.ContextMenu>
                        <ContextMenu>
                            <ContextMenu.ItemContainerStyle>
                                <Style TargetType="{x:Type MenuItem}">
                                    <Setter Property="Command" Value="{Binding Command}" />
                                    <Setter Property="Header" Value="{Binding Path=Name}" />
                                    <Setter Property="ItemsSource" Value="{Binding Path=Children}" />
                                </Style>
                            </ContextMenu.ItemContainerStyle>
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                    <DataGrid.Columns>
                        <DataGridTemplateColumn
                            Width="*"
                            MinWidth="150"
                            Header="Image">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <ListView
                                        ItemsSource="{Binding FileList}"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        Style="{StaticResource BackgroundControlAlternation}">
                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel
                                                    Width="{Binding (FrameworkElement.ActualWidth), RelativeSource={RelativeSource AncestorType=ScrollContentPresenter}}"
                                                    ItemHeight="{Binding (ListView.View).ItemHeight, RelativeSource={RelativeSource AncestorType=ListView}}"
                                                    ItemWidth="{Binding (ListView.View).ItemWidth, RelativeSource={RelativeSource AncestorType=ListView}}" />
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Width="{Binding DataContext.ThumbnailWidth, Source={x:Reference dummyElement}}" Orientation="Vertical">
                                                    <Image
                                                        Height="{Binding DataContext.ThumbnailWidth, Source={x:Reference dummyElement}}"
                                                        Source="{Binding Image, Mode=OneWay}"
                                                        Stretch="Uniform">
                                                        <Image.InputBindings>
                                                            <MouseBinding
                                                                Command="{Binding DataContext.OpenImageCommand, Source={x:Reference dummyElement}}"
                                                                CommandParameter="{Binding Path}"
                                                                MouseAction="LeftDoubleClick" />
                                                        </Image.InputBindings>
                                                    </Image>
                                                    <TextBox
                                                        IsReadOnly="True"
                                                        Text="{Binding Path, Mode=OneWay}"
                                                        ToolTip="{Binding Path, Mode=OneWay}" />
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBox
                                                            IsReadOnly="True"
                                                            Text="{Binding FileSize, Mode=OneWay, Converter={StaticResource fileSizeConverter}}"
                                                            ToolTip="{DynamicResource mainwindow_tooltip_FileSize}">
                                                            <TextBox.Background>
                                                                <MultiBinding Converter="{StaticResource listToBackgroundMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.FileSize}">
                                                                    <Binding Path="ItemsSource" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ListView}}" />
                                                                    <Binding Mode="OneWay" Path="FileSize" />
                                                                    <Binding
                                                                        Mode="OneWay"
                                                                        Path="DataContext.Configuration.GoodColor"
                                                                        Source="{x:Reference dummyElement}" />
                                                                    <Binding
                                                                        Mode="OneWay"
                                                                        Path="DataContext.Configuration.BadColor"
                                                                        Source="{x:Reference dummyElement}" />
                                                                </MultiBinding>
                                                            </TextBox.Background>
                                                        </TextBox>
                                                        <TextBox
                                                            IsReadOnly="True"
                                                            Text="{Binding Resolution, Mode=OneWay}"
                                                            ToolTip="{DynamicResource mainwindow_tooltip_Resolution}">
                                                            <TextBox.Background>
                                                                <MultiBinding Converter="{StaticResource listToBackgroundMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Resolution}">
                                                                    <Binding Path="ItemsSource" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ListView}}" />
                                                                    <Binding Mode="OneWay" Path="Width" />
                                                                    <Binding
                                                                        Mode="OneWay"
                                                                        Path="DataContext.Configuration.GoodColor"
                                                                        Source="{x:Reference dummyElement}" />
                                                                    <Binding
                                                                        Mode="OneWay"
                                                                        Path="DataContext.Configuration.BadColor"
                                                                        Source="{x:Reference dummyElement}" />
                                                                    <Binding Mode="OneWay" Path="Height" />
                                                                </MultiBinding>
                                                            </TextBox.Background>
                                                        </TextBox>
                                                        <TextBox IsReadOnly="True" Text="{Binding Blockiness, Mode=OneWay, StringFormat=G3}">
                                                            <TextBox.ToolTip>
                                                                <ToolTip>
                                                                    <TextBlock>
                                                                        <Run Text="{DynamicResource mainwindow_tooltip_Blockiness}" />
                                                                        <Run Text=":" />
                                                                        <Run Text="{Binding Blockiness, Mode=OneWay}" />
                                                                    </TextBlock>
                                                                </ToolTip>
                                                            </TextBox.ToolTip>
                                                            <TextBox.Background>
                                                                <MultiBinding Converter="{StaticResource listToBackgroundMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Blockiness}">
                                                                    <Binding Path="ItemsSource" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ListView}}" />
                                                                    <Binding Mode="OneWay" Path="Blockiness" />
                                                                    <Binding
                                                                        Mode="OneWay"
                                                                        Path="DataContext.Configuration.GoodColor"
                                                                        Source="{x:Reference dummyElement}" />
                                                                    <Binding
                                                                        Mode="OneWay"
                                                                        Path="DataContext.Configuration.BadColor"
                                                                        Source="{x:Reference dummyElement}" />
                                                                </MultiBinding>
                                                            </TextBox.Background>
                                                        </TextBox>
                                                        <TextBox IsReadOnly="True" Text="{Binding Bluring, Mode=OneWay, StringFormat=G2}">
                                                            <TextBox.ToolTip>
                                                                <ToolTip>
                                                                    <TextBlock>
                                                                        <Run Text="{DynamicResource mainwindow_tooltip_Bluring}" />
                                                                        <Run Text=":" />
                                                                        <Run Text="{Binding Bluring, Mode=OneWay}" />
                                                                    </TextBlock>
                                                                </ToolTip>
                                                            </TextBox.ToolTip>
                                                            <TextBox.Background>
                                                                <MultiBinding Converter="{StaticResource listToBackgroundMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Bluring}">
                                                                    <Binding Path="ItemsSource" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ListView}}" />
                                                                    <Binding Mode="OneWay" Path="Bluring" />
                                                                    <Binding
                                                                        Mode="OneWay"
                                                                        Path="DataContext.Configuration.GoodColor"
                                                                        Source="{x:Reference dummyElement}" />
                                                                    <Binding
                                                                        Mode="OneWay"
                                                                        Path="DataContext.Configuration.BadColor"
                                                                        Source="{x:Reference dummyElement}" />
                                                                </MultiBinding>
                                                            </TextBox.Background>
                                                        </TextBox>

                                                        <TextBox
                                                            Width="30"
                                                            IsReadOnly="True"
                                                            Text="{Binding UtilityIndex, Mode=OneWay, StringFormat=G3}"
                                                            ToolTip="{Binding UtilityIndexCalculateDecription, Mode=OneWay}">
                                                            <TextBox.Background>
                                                                <MultiBinding Converter="{StaticResource listToBackgroundMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.UtilityIndex}">
                                                                    <Binding Path="ItemsSource" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ListView}}" />
                                                                    <Binding Mode="OneWay" Path="UtilityIndex" />
                                                                    <Binding
                                                                        Mode="OneWay"
                                                                        Path="DataContext.Configuration.GoodColor"
                                                                        Source="{x:Reference dummyElement}" />
                                                                    <Binding
                                                                        Mode="OneWay"
                                                                        Path="DataContext.Configuration.BadColor"
                                                                        Source="{x:Reference dummyElement}" />
                                                                </MultiBinding>
                                                            </TextBox.Background>
                                                        </TextBox>
                                                    </StackPanel>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListView>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>

            <TabItem Header="{DynamicResource mainwindow_tabControl_CompareMode}" Visibility="{Binding ViewModeModel.ViewMode, Converter={StaticResource viewModeToVisibilityConverter}, ConverterParameter={x:Static objectModel:ViewMode.Pair}}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <!--  Images  -->
                        <ColumnDefinition Width="Auto" />
                        <!--  GridSplitter  -->
                        <ColumnDefinition />
                        <!--  DataGrid  -->
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0">
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="Auto" />
                            <!--  Separator  -->
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="0.25*" />
                            <ColumnDefinition Width="0.5*" />
                            <ColumnDefinition Width="0.25*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Separator Grid.Row="1" Grid.ColumnSpan="3" />

                        <control:ImageInfoControl
                            Grid.Row="0"
                            Grid.Column="0"
                            EnableInfo="False"
                            MainImage="{Binding Result/PreviosFirstFile}" />
                        <control:ImageInfoControl
                            Grid.Row="0"
                            Grid.Column="1"
                            AdditionalImage="{Binding Result/SecondFile}"
                            BadColor="{Binding Configuration.BadColor, Mode=OneWay}"
                            GoodColor="{Binding Configuration.GoodColor, Mode=OneWay}"
                            MainImage="{Binding Result/FirstFile}"
                            OpenComparatorForDuplPairCommand="{Binding OpenComparatorForDuplPairCommand, Mode=OneWay}"
                            ShowFullImage="True" />

                        <control:ImageInfoControl
                            Grid.Row="0"
                            Grid.Column="2"
                            EnableInfo="False"
                            MainImage="{Binding Result/AfterFirstFile}" />

                        <control:ImageInfoControl
                            Grid.Row="2"
                            Grid.Column="0"
                            EnableInfo="False"
                            MainImage="{Binding Result/PreviosSecondFile}" />
                        <control:ImageInfoControl
                            Grid.Row="2"
                            Grid.Column="1"
                            AdditionalImage="{Binding Result/FirstFile}"
                            BadColor="{Binding Configuration.BadColor, Mode=OneWay}"
                            GoodColor="{Binding Configuration.GoodColor, Mode=OneWay}"
                            MainImage="{Binding Result/SecondFile}"
                            ShowFullImage="True" />
                        <control:ImageInfoControl
                            Grid.Row="2"
                            Grid.Column="2"
                            EnableInfo="False"
                            MainImage="{Binding Result/AfterSecondFile}" />

                        <Grid
                            Grid.Row="0"
                            Grid.RowSpan="3"
                            Grid.Column="3">
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <StackPanel
                                Grid.Row="0"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <Button
                                    Background="{Binding Result/, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource deleteBackgroundValueConverter}, ConverterParameter={x:Static objectModel:PositionInDuplPair.First}}"
                                    Command="{Binding DeleteImageCommand}"
                                    CommandParameter="{Binding Result/FirstFile}"
                                    ToolTip="{DynamicResource mainwindow_tooltip_Delete}">
                                    <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/DeleteIcon16.png" />
                                </Button>
                                <Button
                                    Command="{Binding MoveFirstToNeighbourDirectoryCommand}"
                                    CommandParameter="{Binding Result}"
                                    Style="{StaticResource CollapsedButton}"
                                    ToolTip="{DynamicResource mainwindow_tooltip_MoveFirstToNeighbourDirectory}">
                                    <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/MoveFirstToSecondVerticalButton.png" />
                                </Button>
                                <Button
                                    Command="{Binding RenameFirstLikeSecondCommand}"
                                    CommandParameter="{Binding Result}"
                                    ToolTip="{Binding RenameFirstLikeSecondText, Mode=OneWay}">
                                    <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/AB.jpg" />
                                </Button>
                                <Button
                                    Command="{Binding MoveAndRenameCommand}"
                                    CommandParameter="{Binding Result}"
                                    Style="{StaticResource CollapsedButton}"
                                    ToolTip="{DynamicResource mainwindow_tooltip_MoveAndRename}">
                                    <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/MoveAndRenameSecondLikeFirstVertical.png" />
                                </Button>
                                <Button
                                    Command="{Binding ReplaseSecondCommand}"
                                    CommandParameter="{Binding Result}"
                                    ToolTip="{DynamicResource mainwindow_tooltip_ReplaseNeighbour}">
                                    <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/ReplaceSecondVerticalButton.png" />
                                </Button>
                            </StackPanel>
                            <Button
                                Grid.Row="1"
                                Command="{Binding ExecuteIgnorePairCommand}"
                                CommandParameter="{Binding Result}"
                                ToolTip="{DynamicResource mainwindow_tooltip_Ignore}">
                                <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/MistakeButton.png" />
                            </Button>

                            <StackPanel
                                Grid.Row="2"
                                VerticalAlignment="Bottom"
                                Orientation="Vertical">
                                <Button
                                    Command="{Binding MoveSecondToNeighbourDirectoryCommand}"
                                    CommandParameter="{Binding Result}"
                                    Style="{StaticResource CollapsedButton}"
                                    ToolTip="{DynamicResource mainwindow_tooltip_MoveSecondToNeighbourDirectory}">
                                    <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/MoveSecondToFirstVerticalButton.png" />
                                </Button>
                                <Button
                                    Command="{Binding RenameSecondLikeFirstCommand}"
                                    CommandParameter="{Binding Result}"
                                    ToolTip="{Binding RenameSecondLikeFirstText, Mode=OneWay}">
                                    <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/AB.jpg" />
                                </Button>
                                <Button
                                    Command="{Binding MoveAndRenameCommand}"
                                    CommandParameter="{Binding Result}"
                                    Style="{StaticResource CollapsedButton}"
                                    ToolTip="{DynamicResource mainwindow_tooltip_MoveAndRename}">
                                    <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/MoveAndRenameSecondLikeFirstVertical.png" />
                                </Button>
                                <Button
                                    Command="{Binding ReplaseFirstCommand}"
                                    CommandParameter="{Binding Result}"
                                    ToolTip="{DynamicResource mainwindow_tooltip_ReplaseNeighbour}">
                                    <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/ReplaceFirstVerticalButton.png" />
                                </Button>
                                <Button
                                    Background="{Binding Result/, Converter={StaticResource deleteBackgroundValueConverter}, ConverterParameter={x:Static objectModel:PositionInDuplPair.Second}}"
                                    Command="{Binding DeleteImageCommand}"
                                    CommandParameter="{Binding Result/SecondFile}"
                                    ToolTip="{DynamicResource mainwindow_tooltip_Delete}">
                                    <Image MaxHeight="24" Source="/AntiDupl.NET.WPF;component/Image/DeleteIcon16.png" />
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Grid>

                    <DataGrid
                        Grid.Column="2"
                        AutoGenerateColumns="False"
                        CanUserAddRows="False"
                        IsSynchronizedWithCurrentItem="True"
                        ItemsSource="{Binding Result}"
                        RowStyle="{StaticResource BackgroundControlAlternation}"
                        Style="{StaticResource DataGridAlternation}">

                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Difference">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Background="{Binding Difference, Converter={StaticResource differenceValueConverter}}"
                                            Text="{Binding Difference, Mode=OneWay, StringFormat={}{0:F3}}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="{DynamicResource mainwindow_GridColumn_ImageInfo}" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid Style="{StaticResource BackgroundPanelAlternation}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <!--  Path  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  FileSize  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  Resolution  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  Blockiness  -->
                                                <ColumnDefinition Width="Auto" />
                                                <!--  Bluring  -->
                                                <ColumnDefinition Width="*" />
                                                <!--  UtilityIndex  -->
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>

                                            <Grid.ContextMenu>
                                                <ContextMenu>
                                                    <MenuItem
                                                        Command="{Binding DataContext.OpenComparatorForDuplPairCommand, Source={x:Reference dummyElement}}"
                                                        CommandParameter="{Binding}"
                                                        Header="{DynamicResource mainwindow_contextmenu_OpenСomparator}" />
                                                </ContextMenu>
                                            </Grid.ContextMenu>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.Path, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource folderAreDiffrentMultuValueConverter}">
                                                        <Binding Mode="OneWay" Path="FolderAreDiffrent" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.FolderAreDiffrentColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.Path, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource folderAreDiffrentMultuValueConverter}">
                                                        <Binding Mode="OneWay" Path="FolderAreDiffrent" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.FolderAreDiffrentColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.FileSize, Mode=OneWay, Converter={StaticResource fileSizeConverter}}"
                                                ToolTip="{DynamicResource mainwindow_tooltip_FileSize}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.FileSize}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.FileSize, Mode=OneWay, Converter={StaticResource fileSizeConverter}}"
                                                ToolTip="{DynamicResource mainwindow_tooltip_FileSize}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.FileSize}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.Resolution, Mode=OneWay}"
                                                ToolTip="{DynamicResource mainwindow_tooltip_Resolution}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Resolution}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="2"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.Resolution, Mode=OneWay}"
                                                ToolTip="{DynamicResource mainwindow_tooltip_Resolution}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Resolution}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="3"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.Blockiness, Mode=OneWay, StringFormat=G2}">
                                                <TextBox.ToolTip>
                                                    <ToolTip>
                                                        <TextBlock>
                                                            <Run Text="{DynamicResource mainwindow_tooltip_Blockiness}" />
                                                            <Run Text=":" />
                                                            <Run Text="{Binding FirstFile.Blockiness, Mode=OneWay}" />
                                                        </TextBlock>
                                                    </ToolTip>
                                                </TextBox.ToolTip>
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Blockiness}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="3"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.Blockiness, Mode=OneWay, StringFormat=G2}">
                                                <TextBox.ToolTip>
                                                    <ToolTip>
                                                        <TextBlock>
                                                            <Run Text="{DynamicResource mainwindow_tooltip_Blockiness}" />
                                                            <Run Text=":" />
                                                            <Run Text="{Binding SecondFile.Blockiness, Mode=OneWay}" />
                                                        </TextBlock>
                                                    </ToolTip>
                                                </TextBox.ToolTip>
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Blockiness}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="4"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.Bluring, Mode=OneWay, StringFormat=G3}">
                                                <TextBox.ToolTip>
                                                    <ToolTip>
                                                        <TextBlock>
                                                            <Run Text="{DynamicResource mainwindow_tooltip_Bluring}" />
                                                            <Run Text=":" />
                                                            <Run Text="{Binding FirstFile.Bluring, Mode=OneWay}" />
                                                        </TextBlock>
                                                    </ToolTip>
                                                </TextBox.ToolTip>
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Bluring}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="4"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.Bluring, Mode=OneWay, StringFormat=G3}">
                                                <TextBox.ToolTip>
                                                    <ToolTip>
                                                        <TextBlock>
                                                            <Run Text="{DynamicResource mainwindow_tooltip_Bluring}" />
                                                            <Run Text=":" />
                                                            <Run Text="{Binding SecondFile.Bluring, Mode=OneWay}" />
                                                        </TextBlock>
                                                    </ToolTip>
                                                </TextBox.ToolTip>
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.Bluring}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>

                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="5"
                                                VerticalAlignment="Bottom"
                                                IsReadOnly="True"
                                                Text="{Binding FirstFile.UtilityIndex, Mode=OneWay, StringFormat=G3}"
                                                ToolTip="{Binding FirstFile.UtilityIndexCalculateDecription, Mode=OneWay}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.UtilityIndex}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.First}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding Path="FirstFile.UtilityIndex" />
                                                        <!--  для обновления биндинга  -->
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="5"
                                                VerticalAlignment="Top"
                                                IsReadOnly="True"
                                                Text="{Binding SecondFile.UtilityIndex, Mode=OneWay, StringFormat=G3}"
                                                ToolTip="{Binding SecondFile.UtilityIndexCalculateDecription, Mode=OneWay}">
                                                <TextBox.Background>
                                                    <MultiBinding Converter="{StaticResource duplResultMultiValueConverter}" ConverterParameter="{x:Static convertor:MaxProperty.UtilityIndex}">
                                                        <Binding Mode="OneWay" />
                                                        <Binding Source="{x:Static objectModel:PositionInDuplPair.Second}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.GoodColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding
                                                            Mode="OneWay"
                                                            Path="DataContext.Configuration.BadColor"
                                                            Source="{x:Reference dummyElement}" />
                                                        <Binding Path="SecondFile.UtilityIndex" />
                                                        <!--  для обновления биндинга  -->
                                                    </MultiBinding>
                                                </TextBox.Background>
                                            </TextBox>
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                    <GridSplitter
                        Grid.Column="1"
                        Width="5"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Stretch"
                        ShowsPreview="False" />
                </Grid>
            </TabItem>
        </TabControl>
    </DockPanel>
</Window>